<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link href="/favicon.svg" rel="icon" type="image/svg+xml" />
    <title>Traffic Light</title>
    <script type="module">
      import {
        createContainer,
        jsService,
        cssService
      } from '@erickmerchant/dev-cli/container.mjs'
      import {createDomView, createApp} from '@erickmerchant/framework/main.mjs'

      const app = createApp()

      const target = document.querySelector('body')

      let isSetup = false

      createContainer(
        [
          jsService('css/styles.mjs', 'styles'),
          jsService('main.mjs', 'main'),
          cssService('css/styles.css')
        ],
        async ({main, styles}) => {
          if (!isSetup) {
            isSetup = true

            main.setupApp(app)
          }

          const component = main.createComponent(styles.classes)

          const view = createDomView(target, component)

          app.render(view)
        }
      )
    </script>
  </head>
  <body></body>
</html>
